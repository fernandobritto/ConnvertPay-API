# Configurações de Monitoramento - ConnvertPay API
# Este arquivo contém variáveis específicas para observabilidade

# =============================================================================
# PostgreSQL Configurations
# =============================================================================
POSTGRES_DB=connvertpay-db
POSTGRES_USER=root
POSTGRES_PASSWORD=root
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# =============================================================================
# Postgres Exporter Configurations
# =============================================================================
# String de conexão para o Postgres Exporter
POSTGRES_EXPORTER_DATA_SOURCE_NAME=postgresql://root:root@postgres:5432/connvertpay-db?sslmode=disable

# Nível de log do exporter (debug, info, warn, error)
POSTGRES_EXPORTER_LOG_LEVEL=info

# Arquivo de queries customizadas
POSTGRES_EXPORTER_QUERIES_PATH=/etc/postgres_exporter/queries.yml

# =============================================================================
# Prometheus Configurations
# =============================================================================
# Intervalo global de coleta (segundos)
PROMETHEUS_SCRAPE_INTERVAL=15s

# Intervalo de avaliação de regras (segundos)
PROMETHEUS_EVALUATION_INTERVAL=15s

# Retenção de dados (tempo)
PROMETHEUS_RETENTION_TIME=30d

# Retenção de dados (tamanho)
PROMETHEUS_RETENTION_SIZE=10GB

# =============================================================================
# Network and Security
# =============================================================================
# Rede Docker para isolamento
DOCKER_NETWORK_NAME=connvertpay-network

# Portas expostas (em produção, considere restringir)
POSTGRES_EXTERNAL_PORT=5432
PROMETHEUS_EXTERNAL_PORT=9090
POSTGRES_EXPORTER_EXTERNAL_PORT=9187

# =============================================================================
# Monitoring Labels
# =============================================================================
MONITORING_ENVIRONMENT=development
MONITORING_SERVICE_NAME=connvertpay-api
MONITORING_VERSION=1.0.0

# =============================================================================
# Health Check Configurations
# =============================================================================
# Intervalos dos health checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s

# =============================================================================
# Performance Tuning
# =============================================================================
# PostgreSQL performance settings
PG_SHARED_PRELOAD_LIBRARIES=pg_stat_statements
PG_STAT_STATEMENTS_TRACK=all
PG_STAT_STATEMENTS_MAX=10000

# Logging configurations
PG_LOG_STATEMENT=all
PG_LOG_MIN_DURATION_STATEMENT=100ms
PG_LOG_CHECKPOINTS=on
PG_LOG_CONNECTIONS=on
PG_LOG_DISCONNECTIONS=on
PG_LOG_LOCK_WAITS=on

# =============================================================================
# Volume Configurations
# =============================================================================
# Volumes Docker para persistência
POSTGRES_VOLUME_NAME=connvertpay-postgres-data
PROMETHEUS_VOLUME_NAME=connvertpay-prometheus-data

# =============================================================================
# Future Extensions
# =============================================================================
# Grafana (para implementação futura)
GRAFANA_EXTERNAL_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Alertmanager (para implementação futura)
ALERTMANAGER_EXTERNAL_PORT=9093

# =============================================================================
# Security Notes
# =============================================================================
# IMPORTANTE: Em produção, substitua por:
# - Senhas fortes e únicas
# - Usuários específicos com permissões limitadas
# - Secrets do Docker Swarm ou Kubernetes
# - Certificados TLS para comunicação segura
# - Firewall e network policies adequadas